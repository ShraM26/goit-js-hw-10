{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nfunction elemDOM(selector) {\n  return document.querySelector(selector);\n};\nconst btnStart = elemDOM('[data-start]');\nconst days = elemDOM('[data-days]');\nconst hours = elemDOM('[data-hours]');\nconst minutes = elemDOM('[data-minutes]');\nconst seconds = elemDOM('[data-seconds]');\nconst datetime = elemDOM('#datetime-picker');\n\n\n\nbtnStart.disabled = true;\nlet userSelectedDate;\n // Опции для flatpickr\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    handleDateSelection(selectedDates);\n  }\n}\n// Инициализация flatpickr\nflatpickr(datetime, options);\n// Обробка вибору дати\nfunction handleDateSelection(selectedDates) {\n  const selectedDate = selectedDates[0];\n  const currentDate = new Date();\n   \n  if (selectedDate > currentDate) {\n    btnStart.disabled = false;\n    userSelectedDate = selectedDate;\n  } else {\n    showError(\"Please choose a date in the future\");\n    btnStart.disabled = true;\n  }\n}\n// Показ помилки через ізіТост\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight'\n  });\n}\n// Начало отсчета таймера при нажатии на кнопку Start\nbtnStart.addEventListener('click', startTimer);\n\nfunction startTimer () {\n  btnStart.disabled = true;\n  datetime.disabled = true;\n  \n  const countdownDate = new Date(userSelectedDate).getTime();\n  const timerInterval = setInterval(updateTimer, 1000);\n\n  // Функция обновления таймера\n  function updateTimer() {\n    const currentTime = new Date().getTime();\n    const difference = countdownDate - currentTime;\n\n    if (difference <= 0) {\n      clearInterval(timerInterval);\n      // Действия при завершении отсчета\n      days.textContent = '00';\n      hours.textContent = '00';\n      minutes.textContent = '00';\n      seconds.textContent = '00';\n      btnStart.disabled = false;\n      datetime.disabled = false;\n      return;\n    }\n\n    const time = convertMs(difference);\n\n    // Отображение времени в интерфейсе с добавлением ведущих нулей\n    days.textContent = addLeadingZero(time.days);\n    hours.textContent = addLeadingZero(time.hours);\n    minutes.textContent = addLeadingZero(time.minutes);\n    seconds.textContent = addLeadingZero(time.seconds);\n  }\n}\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n\n\n\n\n"],"names":["elemDOM","selector","btnStart","days","hours","minutes","seconds","datetime","userSelectedDate","options","selectedDates","handleDateSelection","flatpickr","selectedDate","showError","message","iziToast","startTimer","countdownDate","timerInterval","updateTimer","currentTime","difference","time","convertMs","addLeadingZero","value","ms"],"mappings":"iyBAOA,SAASA,EAAQC,EAAU,CACzB,OAAO,SAAS,cAAcA,CAAQ,CACxC,CACA,MAAMC,EAAWF,EAAQ,cAAc,EACjCG,EAAOH,EAAQ,aAAa,EAC5BI,EAAQJ,EAAQ,cAAc,EAC9BK,EAAUL,EAAQ,gBAAgB,EAClCM,EAAUN,EAAQ,gBAAgB,EAClCO,EAAWP,EAAQ,kBAAkB,EAI3CE,EAAS,SAAW,GACpB,IAAIM,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAoBD,CAAa,CAClC,CACH,EAEAE,EAAUL,EAAUE,CAAO,EAE3B,SAASE,EAAoBD,EAAe,CAC1C,MAAMG,EAAeH,EAAc,CAAC,EAGhCG,EAFgB,IAAI,MAGtBX,EAAS,SAAW,GACpBM,EAAmBK,IAEnBC,EAAU,oCAAoC,EAC9CZ,EAAS,SAAW,GAExB,CAEA,SAASY,EAAUC,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEAb,EAAS,iBAAiB,QAASe,CAAU,EAE7C,SAASA,GAAc,CACrBf,EAAS,SAAW,GACpBK,EAAS,SAAW,GAEpB,MAAMW,EAAgB,IAAI,KAAKV,CAAgB,EAAE,QAAO,EAClDW,EAAgB,YAAYC,EAAa,GAAI,EAGnD,SAASA,GAAc,CACrB,MAAMC,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAAaJ,EAAgBG,EAEnC,GAAIC,GAAc,EAAG,CACnB,cAAcH,CAAa,EAE3BhB,EAAK,YAAc,KACnBC,EAAM,YAAc,KACpBC,EAAQ,YAAc,KACtBC,EAAQ,YAAc,KACtBJ,EAAS,SAAW,GACpBK,EAAS,SAAW,GACpB,MACD,CAED,MAAMgB,EAAOC,EAAUF,CAAU,EAGjCnB,EAAK,YAAcsB,EAAeF,EAAK,IAAI,EAC3CnB,EAAM,YAAcqB,EAAeF,EAAK,KAAK,EAC7ClB,EAAQ,YAAcoB,EAAeF,EAAK,OAAO,EACjDjB,EAAQ,YAAcmB,EAAeF,EAAK,OAAO,CAClD,CACH,CACA,SAASE,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASF,EAAUG,EAAI,CAMrB,MAAMxB,EAAO,KAAK,MAAMwB,EAAK,KAAG,EAC1BvB,EAAQ,KAAK,MAAOuB,EAAK,MAAO,IAAI,EACpCtB,EAAU,KAAK,MAAQsB,EAAK,MAAO,KAAQ,GAAM,EACjDrB,EAAU,KAAK,MAASqB,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAxB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}